{"ast":null,"code":"import _toConsumableArray from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';// import MessageForm from './MessageForm';\nimport axios from'axios';import MessageList from'./MessageList';import MessageCard from'./MessageCard';// import axios from 'axios';\nvar Messages=/*#__PURE__*/function(_Component){_inherits(Messages,_Component);var _super=_createSuper(Messages);function Messages(){var _this;_classCallCheck(this,Messages);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={clickedMessage:'',messageID:null,allMessages:null,showMessage:false};_this.getData=function(){axios.get('/api/messages').then(function(response){console.log(response.data,\"  messages of all\");// put them into the state\n_this.setState({allMessages:response.data});}).catch(function(err){return console.log(err);});};_this.getMessage=function(messageID){var filtered=_this.state.allMessages.filter(function(message){return message._doc._id===messageID;});console.log(filtered,' msg filtered');_this.setState({messageID:messageID,clickedMessage:filtered[0]._doc.message});};_this.replyMessage=function(message){_this.setState(function(prevState){return{clickedMessage:[].concat(_toConsumableArray(prevState.clickedMessage),[message])};});};_this.toggleMessage=function(){_this.setState(function(prevState){return{showMessage:!prevState.showMessage};});};return _this;}_createClass(Messages,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"render\",value:function render(){if(!this.state.allMessages)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"messagesInbox\",children:[/*#__PURE__*/_jsx(MessageList,{allMessages:this.state.allMessages,getMessage:this.getMessage,getData:this.getData}),/*#__PURE__*/_jsx(MessageCard,{replyMessage:this.replyMessage,messageID:this.state.messageID,clickedMessage:this.state.clickedMessage,allMessages:this.state.allMessages})]});}}]);return Messages;}(Component);export{Messages as default};","map":{"version":3,"sources":["C:/Users/themo/Documents/project/language-exchange/client/src/components/Messages.js"],"names":["React","Component","axios","MessageList","MessageCard","Messages","state","clickedMessage","messageID","allMessages","showMessage","getData","get","then","response","console","log","data","setState","catch","err","getMessage","filtered","filter","message","_doc","_id","replyMessage","prevState","toggleMessage"],"mappings":"g8BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CAEA;GAEqBC,CAAAA,Q,mUACnBC,K,CAAQ,CACNC,cAAc,CAAG,EADX,CAENC,SAAS,CAAC,IAFJ,CAGNC,WAAW,CAAE,IAHP,CAINC,WAAW,CAAE,KAJP,C,OAQRC,O,CAAU,UAAM,CACdT,KAAK,CAACU,GAAN,CAAU,eAAV,EACGC,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,CAA4B,mBAA5B,EACA;AACA,MAAKC,QAAL,CAAc,CACZT,WAAW,CAAEK,QAAQ,CAACG,IADV,CAAd,EAGD,CAPH,EAQGE,KARH,CAQS,SAAAC,GAAG,QAAIL,CAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAJ,EARZ,EASD,C,OAEDC,U,CAAa,SAACb,SAAD,CAAe,CAC1B,GAAMc,CAAAA,QAAQ,CAAG,MAAKhB,KAAL,CAAWG,WAAX,CAAuBc,MAAvB,CAA8B,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,GAAqBlB,SAAzB,EAArC,CAAjB,CACAO,OAAO,CAACC,GAAR,CAAYM,QAAZ,CAAsB,eAAtB,EACA,MAAKJ,QAAL,CAAc,CAACV,SAAS,CAATA,SAAD,CAAYD,cAAc,CAACe,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAZ,CAAiBD,OAA5C,CAAd,EACD,C,OAEDG,Y,CAAe,SAACH,OAAD,CAAa,CAC1B,MAAKN,QAAL,CAAc,SAAAU,SAAS,QAAK,CAC1BrB,cAAc,8BAAMqB,SAAS,CAACrB,cAAhB,GAAgCiB,OAAhC,EADY,CAAL,EAAvB,EAGD,C,OASDK,a,CAAgB,UAAM,CACpB,MAAKX,QAAL,CAAc,SAACU,SAAD,QAAgB,CAC5BlB,WAAW,CAAE,CAACkB,SAAS,CAAClB,WADI,CAAhB,EAAd,EAGD,C,iGAXmB,CAClB,KAAKC,OAAL,GACD,C,uCAaQ,CACP,GAAG,CAAC,KAAKL,KAAL,CAAWG,WAAf,CAA4B,mBAAO,iCAAP,CAC5B,mBACA,aAAK,SAAS,CAAC,eAAf,wBACC,KAAC,WAAD,EACA,WAAW,CAAI,KAAKH,KAAL,CAAWG,WAD1B,CAEA,UAAU,CAAI,KAAKY,UAFnB,CAGA,OAAO,CAAI,KAAKV,OAHhB,EADD,cAMC,KAAC,WAAD,EACA,YAAY,CAAI,KAAKgB,YADrB,CAEA,SAAS,CAAI,KAAKrB,KAAL,CAAWE,SAFxB,CAGA,cAAc,CAAI,KAAKF,KAAL,CAAWC,cAH7B,CAIA,WAAW,CAAG,KAAKD,KAAL,CAAWG,WAJzB,EAND,GADA,CAeD,C,sBAjEmCR,S,SAAjBI,Q","sourcesContent":["import React, { Component } from 'react';\n// import MessageForm from './MessageForm';\nimport axios from 'axios';\nimport MessageList from './MessageList'\nimport MessageCard from './MessageCard'\n\n// import axios from 'axios';\n\nexport default class Messages extends Component {\n  state = {\n    clickedMessage : '',\n    messageID:null,\n    allMessages: null,\n    showMessage: false\n  }\n\n\n  getData = () => {\n    axios.get('/api/messages')\n      .then(response => {\n        console.log(response.data,  \"  messages of all\");\n        // put them into the state\n        this.setState({\n          allMessages: response.data\n        })\n      })\n      .catch(err => console.log(err))\n  }\n\n  getMessage = (messageID) => {\n    const filtered = this.state.allMessages.filter(message => message._doc._id === messageID)\n    console.log(filtered, ' msg filtered')\n    this.setState({messageID, clickedMessage:filtered[0]._doc.message})\n  }\n\n  replyMessage = (message) => {\n    this.setState(prevState => ({\n      clickedMessage: [...prevState.clickedMessage, message]\n    }))\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n\n  \n\n  toggleMessage = () => {\n    this.setState((prevState) => ({\n      showMessage: !prevState.showMessage\n    }))\n  }\n\n\n\n  render() {\n    if(!this.state.allMessages) return <p>Loading...</p>\n    return (\n    <div className='messagesInbox'>\n     <MessageList \n     allMessages = {this.state.allMessages} \n     getMessage = {this.getMessage}\n     getData = {this.getData}\n     />\n     <MessageCard \n     replyMessage = {this.replyMessage} \n     messageID = {this.state.messageID}\n     clickedMessage = {this.state.clickedMessage}\n     allMessages ={this.state.allMessages}\n    />\n    </div>      \n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}