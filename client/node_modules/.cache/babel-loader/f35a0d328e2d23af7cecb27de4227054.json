{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\themo\\\\Documents\\\\project\\\\language-exchange\\\\client\\\\src\\\\components\\\\MyUserDetails.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport service from '../services/picture-upload.js';\nimport { Button, Card, Spinner } from 'react-bootstrap';\nimport EditProfile from './EditProfile';\nimport { Link } from 'react-router-dom';\nexport default class MyUserDetails extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null,\n      username: '',\n      email: '',\n      id: '',\n      country: '',\n      languagesSpoken: [],\n      languagesLearn: [],\n      education: [],\n      skills: [],\n      interests: [],\n      picture: '',\n      about: '',\n      age: 0,\n      editForm: false,\n      showDetails: true,\n      imageURL: ''\n    };\n\n    this.getData = () => {\n      const id = this.props.match.params.id;\n      axios.get(`/api/users/${id}`).then(response => {\n        this.setState({\n          user: response.data,\n          username: response.data.username,\n          email: response.data.email,\n          id: response.data._id,\n          country: response.data.country,\n          languagesSpoken: response.data.languagesSpoken,\n          languagesLearn: response.data.languagesLearn,\n          education: response.data.education,\n          skills: response.data.skills,\n          interests: response.data.interests,\n          picture: response.data.picture,\n          imageURL: response.data.picture,\n          about: response.data.about,\n          age: response.data.age\n        });\n        console.log(id);\n        console.log(response.data);\n      }).catch(err => console.log(err));\n    };\n\n    this.toggleEditForm = () => {\n      this.setState(prevState => ({\n        editForm: !prevState.editForm,\n        showDetails: !prevState.showDetails\n      }));\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const id = this.props.match.params.id;\n      console.log('pic upload');\n      axios.put(`/api/users/${id}`, {\n        username: this.state.username,\n        email: this.state.email,\n        id: this.state.id,\n        country: this.state.country,\n        languagesSpoken: this.state.languagesSpoken,\n        languagesLearn: this.state.languagesLearn,\n        education: this.state.education,\n        skills: this.state.skills,\n        interests: this.state.interests,\n        picture: this.state.imageURL,\n        about: this.state.about,\n        age: this.state.age\n      }).then(response => {\n        this.setState({\n          user: response.data,\n          username: response.data.username,\n          email: response.data.email,\n          id: response.data._id,\n          country: response.data.country,\n          languagesSpoken: response.data.languagesSpoken,\n          languagesLearn: response.data.languagesLearn,\n          education: response.data.education,\n          skills: response.data.skills,\n          interests: response.data.interests,\n          picture: response.data.picture,\n          about: response.data.about,\n          age: response.data.age,\n          editForm: false,\n          showDetails: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleFileUpload = e => {\n      const uploadData = new FormData();\n      uploadData.append(\"picture\", e.target.files[0]);\n      service.handleUpload(uploadData).then(response => {\n        const imageURL = response.secure_url;\n        const publicID = response.public_id;\n        console.log(response);\n        this.setState({\n          imageURL: imageURL,\n          publicID: publicID\n        });\n      }).catch(err => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    if (!this.state.user) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"sr-only\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.state.showDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-box-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            alt: \"profile\",\n            className: \"profile-pic\",\n            src: this.state.picture,\n            style: {\n              width: '14rem',\n              height: '14rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-sub-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Age:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 18\n              }, this), \" \", this.state.age]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Country:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 18\n              }, this), \" \", this.state.country]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Speaking:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 18\n              }, this), \" \", this.state.languagesSpoken.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Learning:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 18\n              }, this), \" \", this.state.languagesLearn.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-detail\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              width: '100%',\n              height: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: this.state.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Skills:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 20\n                  }, this), \" \", this.state.skills.join(', ')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Interests:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 22\n                  }, this), \" \", this.state.interests.join(', ')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Education: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 22\n                  }, this), this.state.education, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"About: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 22\n                  }, this), this.state.about]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(Link, {\n                    className: \"button\",\n                    onClick: this.toggleEditForm,\n                    children: \"Edit my profile\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, this.state.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), this.state.editForm && /*#__PURE__*/_jsxDEV(EditProfile, { ...this.state,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        handleFileUpload: this.handleFileUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/themo/Documents/project/language-exchange/client/src/components/MyUserDetails.js"],"names":["React","Component","axios","service","Button","Card","Spinner","EditProfile","Link","MyUserDetails","state","user","username","email","id","country","languagesSpoken","languagesLearn","education","skills","interests","picture","about","age","editForm","showDetails","imageURL","getData","props","match","params","get","then","response","setState","data","_id","console","log","catch","err","toggleEditForm","prevState","handleChange","event","name","value","target","handleSubmit","preventDefault","put","handleFileUpload","e","uploadData","FormData","append","files","handleUpload","secure_url","publicID","public_id","componentDidMount","render","width","height","join"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\nimport service from '../services/picture-upload.js';\nimport { Button, Card , Spinner} from 'react-bootstrap';\nimport EditProfile from './EditProfile';\nimport { Link } from 'react-router-dom'\n\n\nexport default class MyUserDetails extends Component {\n  state = {\n    user: null,\n    username: '',\n    email: '',\n    id: '',\n    country: '',\n    languagesSpoken: [],\n    languagesLearn: [],\n    education: [],\n    skills: [],\n    interests: [],\n    picture: '',\n    about: '',\n    age: 0,  \n    editForm: false,\n    showDetails: true,\n    imageURL : ''\n\n  }\n\n  getData = () => {\n    const id = this.props.match.params.id;\n    axios.get(`/api/users/${id}`)\n    .then(response => {\n      this.setState({ \n        user: response.data,\n        username: response.data.username,\n        email: response.data.email,\n        id: response.data._id,\n        country: response.data.country,\n        languagesSpoken: response.data.languagesSpoken,\n        languagesLearn: response.data.languagesLearn,\n        education: response.data.education,\n        skills: response.data.skills,\n        interests: response.data.interests,\n        picture: response.data.picture,\n        imageURL: response.data.picture,\n        about: response.data.about,\n        age: response.data.age,\n      })\n      console.log(id)\n\n    console.log(response.data)\n    })\n    .catch(err => console.log(err))\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  toggleEditForm = () => {\n    this.setState((prevState) => ({\n      editForm: !prevState.editForm,\n      showDetails: !prevState.showDetails\n    }))\n  }\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    })\n  }\n\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const id = this.props.match.params.id;\n    console.log('pic upload')\n    axios.put(`/api/users/${id}`, {\n      username: this.state.username,\n      email: this.state.email,\n      id: this.state.id,\n      country: this.state.country,\n      languagesSpoken: this.state.languagesSpoken,\n      languagesLearn: this.state.languagesLearn,\n      education: this.state.education,\n      skills: this.state.skills,\n      interests: this.state.interests,\n      picture: this.state.imageURL,\n      about: this.state.about,\n      age: this.state.age\n\n    })\n    .then(response => {\n      this.setState({\n        user: response.data,\n        username: response.data.username,\n        email: response.data.email,\n        id: response.data._id,\n        country: response.data.country,\n        languagesSpoken: response.data.languagesSpoken,\n        languagesLearn: response.data.languagesLearn,\n        education: response.data.education,\n        skills: response.data.skills,\n        interests: response.data.interests,\n        picture: response.data.picture,\n        about: response.data.about,\n        age: response.data.age,       \n        editForm: false,\n        showDetails: true\n      })\n    })\n    .catch(err => {\n      console.log(err);\n    })\n}\n\n\nhandleFileUpload = e => {\n  const uploadData = new FormData();\n  uploadData.append(\"picture\", e.target.files[0]);\n\n  service.handleUpload(uploadData)\n    .then(response => {\n      const imageURL = response.secure_url;\n      const publicID = response.public_id;\n      console.log(response);\n      this.setState({ imageURL: imageURL, publicID: publicID });\n    })\n    .catch(err => {\n      console.log(\"Error while uploading the file: \", err);\n    });\n}\n\n  \n\n  render() {\n    if (!this.state.user) \n    return (\n        <div className='spinner'>\n        <Spinner animation=\"border\" role=\"status\" >\n        <span className=\"sr-only\">Loading...</span>\n        </Spinner>\n        </div>\n    )\n    return ( \n         <>\n\n        {this.state.showDetails && (\n    \n          <div className='profile-box' key={this.state.id}>\n          <div className='profile-box-left'>\n          <img alt=\"profile\" className=\"profile-pic\" src={this.state.picture} style={{ width: '14rem', height: '14rem'}}/>         \n              <div className='profile-sub-info'>\n              <p><b>Age:</b> {this.state.age}</p> \n              <p><b>Country:</b> {this.state.country}</p>\n              <p><b>Speaking:</b> {this.state.languagesSpoken.join(', ')}</p>\n              <p><b>Learning:</b> {this.state.languagesLearn.join(', ')}</p>\n              </div>\n   \n          </div>\n          <div className='profile-detail'>\n          <Card style={{ width: '100%', height: '100%'}}>\n            <Card.Body>\n              <Card.Title>\n                <h3>\n                  {this.state.username}\n                </h3>\n                <hr></hr>\n                </Card.Title>\n              <Card.Text>\n                <p><b>Skills:</b> {this.state.skills.join(', ')}</p>\n                  <p><b>Interests:</b> {this.state.interests.join(', ')}</p>\n                  <p><b>Education: </b>{this.state.education} </p> \n                  <p><b>About: </b>{this.state.about}</p>  \n                  <div>\n                  <hr></hr>\n                  <Link className='button' onClick={this.toggleEditForm}>Edit my profile</Link>           \n                  </div>            \n              </Card.Text>\n            </Card.Body>\n          </Card>\n        \n          </div>\n        </div>\n       \n        )} \n        {this.state.editForm && (\n              <EditProfile\n                {...this.state}\n                handleChange={this.handleChange}\n                handleSubmit={this.handleSubmit}\n                handleFileUpload={this.handleFileUpload}\n              />\n              )}\n\n        </>\n        )\n  }\n}"]},"metadata":{},"sourceType":"module"}