{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/themo/Documents/project/language-exchange/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import axios from'axios';import React,{Component}from'react';import{Button,Form}from'react-bootstrap';var Reply=/*#__PURE__*/function(_Component){_inherits(Reply,_Component);var _super=_createSuper(Reply);function Reply(){var _this;_classCallCheck(this,Reply);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={content:'',clientID:null,username:null,clicks:0};_this.sendData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",axios.post(\"/api/messages/reply/\".concat(_this.props.messageID),{content:data,user:_this.state.clientID}).then(function(res){return true;}).catch(function(err){return console.log(err);}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var data,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();data=_this.state.content;_context2.next=4;return _this.sendData(data);case 4:response=_context2.sent;_this.props.replyMessage({user:{username:_this.state.username},content:_this.state.content});response&&_this.setState({clicks:_this.state.clicks+1,content:''});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleChange=function(event){_this.setState({content:event.target.value});};return _this;}_createClass(Reply,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/api/client').then(function(res){return _this2.setState({clientID:res.data._id,username:res.data.username});});}/*componentDidUpdate(prevProps, prevState) {\n   if( prevState.clicks >= 1 && this.state.clientID != null) {\n    this.props.replyMessage({user:this.state.clientID, content:this.state.content})\n    this.sendData()\n   }\n  }*/},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"messageFormInbox\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"content\",children:\" \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"content\",placeholder:\"Write a message\",as:\"textarea\",rows:3,id:\"content\",value:this.state.content,onChange:this.handleChange})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Send\"})]})]})});}}]);return Reply;}(Component);export{Reply as default};","map":{"version":3,"sources":["C:/Users/themo/Documents/project/language-exchange/client/src/components/Reply.js"],"names":["axios","React","Component","Button","Form","Reply","state","content","clientID","username","clicks","sendData","data","post","props","messageID","user","then","res","catch","err","console","log","handleSubmit","event","preventDefault","response","replyMessage","setState","handleChange","target","value","get","_id"],"mappings":"0pCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAAQC,MAAR,CAAgBC,IAAhB,KAA4B,iBAA5B,C,GACqBC,CAAAA,K,uTAEnBC,K,CAAQ,CACNC,OAAO,CAAC,EADF,CAENC,QAAQ,CAAC,IAFH,CAGNC,QAAQ,CAAC,IAHH,CAINC,MAAM,CAAC,CAJD,C,OAORC,Q,0FAAW,iBAAOC,IAAP,kJACDZ,KAAK,CAACa,IAAN,+BAAkC,MAAKC,KAAL,CAAWC,SAA7C,EACP,CAACR,OAAO,CAACK,IAAT,CAAcI,IAAI,CAAC,MAAKV,KAAL,CAAWE,QAA9B,CADO,EAEPS,IAFO,CAEF,SAAAC,GAAG,QAAI,KAAJ,EAFD,EAGPC,KAHO,CAGD,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHF,CADC,wD,qEAOTG,Y,2FAAe,kBAAOC,KAAP,wIACfA,KAAK,CAACC,cAAN,GACMb,IAFS,CAEF,MAAKN,KAAL,CAAWC,OAFT,wBAGQ,OAAKI,QAAL,CAAcC,IAAd,CAHR,QAGTc,QAHS,gBAIf,MAAKZ,KAAL,CAAWa,YAAX,CAAwB,CAACX,IAAI,CAAC,CAACP,QAAQ,CAAC,MAAKH,KAAL,CAAWG,QAArB,CAAN,CAAsCF,OAAO,CAAC,MAAKD,KAAL,CAAWC,OAAzD,CAAxB,EACAmB,QAAQ,EAAI,MAAKE,QAAL,CAAc,CAAClB,MAAM,CAAC,MAAKJ,KAAL,CAAWI,MAAX,CAAkB,CAA1B,CAA6BH,OAAO,CAAC,EAArC,CAAd,CAAZ,CALe,wD,uEASjBsB,Y,CAAe,SAACL,KAAD,CAAW,CACxB,MAAKI,QAAL,CAAc,CAACrB,OAAO,CAACiB,KAAK,CAACM,MAAN,CAAaC,KAAtB,CAAd,EACD,C,8FAEmB,iBAClB/B,KAAK,CAACgC,GAAN,CAAU,aAAV,EACCf,IADD,CACM,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACU,QAAL,CAAc,CAACpB,QAAQ,CAACU,GAAG,CAACN,IAAJ,CAASqB,GAAnB,CAAwBxB,QAAQ,CAACS,GAAG,CAACN,IAAJ,CAASH,QAA1C,CAAd,CAAJ,EADT,EAED,CAED;AACF;AACA;AACA;AACA;AACA,K,uCACW,CACP,mBACE,sCAEA,aAAK,SAAS,CAAC,kBAAf,wBACA,aADA,cAGA,MAAC,IAAD,EAAM,QAAQ,CAAE,KAAKc,YAArB,wBACU,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,EAAY,OAAO,CAAC,SAApB,eADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,SAFP,CAGE,WAAW,CAAC,iBAHd,CAIE,EAAE,CAAC,UAJL,CAKE,IAAI,CAAE,CALR,CAME,EAAE,CAAC,SANL,CAOE,KAAK,CAAE,KAAKjB,KAAL,CAAWC,OAPpB,CAQE,QAAQ,CAAE,KAAKsB,YARjB,EAFF,GADV,cAcU,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,kBAdV,GAHA,GAFA,EADF,CA0BD,C,mBAnEgC3B,S,SAAdG,K","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react'\nimport {Button, Form } from 'react-bootstrap';\nexport default class Reply extends Component {\n  \n  state = {\n    content:'',\n    clientID:null,\n    username:null,\n    clicks:0\n  }\n\n  sendData = async (data) => {\n     return axios.post(`/api/messages/reply/${this.props.messageID}`, \n     {content:data,user:this.state.clientID})\n    .then(res => true)\n    .catch(err => console.log(err))\n   }\n  \n    handleSubmit = async (event) => {\n    event.preventDefault()\n    const data = this.state.content\n    const response = await this.sendData(data)\n    this.props.replyMessage({user:{username:this.state.username}, content:this.state.content})\n    response && this.setState({clicks:this.state.clicks+1, content:''})\n    \n    \n  }\n  handleChange = (event) => {\n    this.setState({content:event.target.value})\n  }\n\n  componentDidMount() {\n    axios.get('/api/client')\n    .then(res => this.setState({clientID:res.data._id, username:res.data.username}))\n  }\n\n  /*componentDidUpdate(prevProps, prevState) {\n   if( prevState.clicks >= 1 && this.state.clientID != null) {\n    this.props.replyMessage({user:this.state.clientID, content:this.state.content})\n    this.sendData()\n   }\n  }*/\n  render() {\n    return (\n      <>\n\n      <div className='messageFormInbox' >\n      <hr></hr>\n\n      <Form onSubmit={this.handleSubmit} > \n                <Form.Group>\n                  <Form.Label htmlFor='content'> </Form.Label>\n                  <Form.Control\n                    type='text'\n                    name='content'\n                    placeholder='Write a message'\n                    as=\"textarea\" \n                    rows={3} \n                    id='content'\n                    value={this.state.content}\n                    onChange={this.handleChange}\n                  />\n                </Form.Group>\n                <Button type='submit'>Send</Button>\n        </Form>\n      \n      </div>\n      </>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}